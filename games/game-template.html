<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T12RSVRG7Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T12RSVRG7Z');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="game-title">Game Title - YourLair</title>
    <meta id="game-meta-description" name="description" content="Play Game Title online - An exciting game with amazing features.">
    <link id="game-canonical" rel="canonical" href="https://yourlair.online/games/game-slug.html" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#0A84FF', // 苹果iOS蓝
                        'primary-dark': '#0060DF', // 深蓝色
                        'primary-light': '#4BB4FF', // 浅蓝色
                        'dark-bg': '#1E2A3A', // 深蓝色背景
                        'card-bg': '#2D3748', // 卡片背景
                        'light-text': '#F7FAFC', // 浅色文字
                        'gray-text': '#A0AEC0', // 灰色文字
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'San Francisco', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'sans-serif']
                    },
                    boxShadow: {
                        'card': '0 10px 20px rgba(10, 132, 255, 0.1)',
                        'card-hover': '0 12px 24px rgba(10, 132, 255, 0.2)',
                    }
                }
            }
        }
    </script>
    <style>
        .game-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
        }
        .game-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        .related-game:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(10, 132, 255, 0.2);
        }
        /* 玻璃态效果 */
        .glass-effect {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(46, 75, 115, 0.7);
        }
        /* 图片加载动画 */
        .image-loading {
            background: linear-gradient(90deg, #1E2A3A, #2D3748, #1E2A3A);
            background-size: 200% 100%;
            animation: loading 1.5s ease-in-out infinite;
        }
        @keyframes loading {
            0% {background-position: 0% 50%}
            50% {background-position: 100% 50%}
            100% {background-position: 0% 50%}
        }
        /* 蓝色光晕效果 */
        .blue-glow {
            box-shadow: 0 0 15px rgba(10, 132, 255, 0.5);
        }
    </style>
</head>
<body class="bg-dark-bg text-light-text font-sans antialiased">
    <!-- 导航栏 -->
    <nav class="glass-effect text-light-text py-4 sticky top-0 z-50 border-b border-primary/30">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="../index.html" class="text-2xl font-bold text-primary">YourLair</a>
            <div class="hidden md:flex space-x-8">
                <a href="../index.html" class="hover:text-primary transition-colors">Home</a>
                <a href="../categories.html" class="hover:text-primary transition-colors">Categories</a>
                <a href="../popular.html" class="hover:text-primary transition-colors">Popular</a>
                <a href="../new.html" class="hover:text-primary transition-colors">New Games</a>
                <a href="../about.html" class="hover:text-primary transition-colors">About</a>
            </div>
            <button class="md:hidden focus:outline-none" id="mobile-menu-button" aria-label="Menu">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>
        <div class="md:hidden hidden px-4 py-2 glass-effect absolute w-full" id="mobile-menu">
            <a href="../index.html" class="block py-3 border-b border-primary/20">Home</a>
            <a href="../categories.html" class="block py-3 border-b border-primary/20">Categories</a>
            <a href="../popular.html" class="block py-3 border-b border-primary/20">Popular</a>
            <a href="../new.html" class="block py-3 border-b border-primary/20">New Games</a>
            <a href="../about.html" class="block py-3">About</a>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <div class="mb-6">
            <a href="../index.html" class="text-primary hover:underline">Home</a> &gt;
            <a href="#" id="game-category-breadcrumb" class="text-primary hover:underline">Category</a> &gt;
            <span class="text-gray-text" id="game-breadcrumb-title">Game Title</span>
        </div>

        <header class="mb-8">
            <h1 class="text-4xl font-bold mb-2" id="header-game-title">Game Title</h1>
            <div class="flex flex-wrap gap-2 mb-4" id="game-tags">
                <!-- 动态填充游戏标签 -->
            </div>
            <p class="text-xl text-gray-text" id="game-short-description">Game short description goes here.</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="game-container mb-8 rounded-lg shadow-lg overflow-hidden blue-glow">
                    <iframe id="game-iframe" src="" allowfullscreen></iframe>
                </div>

                <div class="bg-card-bg p-4 rounded-lg mb-8">
                    <h2 class="text-xl font-bold mb-2">How to Play</h2>
                    <p id="how-to-play">Game instructions will be displayed here.</p>
                </div>

                <article class="prose prose-invert max-w-none">
                    <h2>Game Overview</h2>
                    <p id="game-overview">Detailed game description will be displayed here.</p>
                    
                    <h2>Key Features</h2>
                    <ul id="game-features">
                        <!-- 动态填充游戏特性 -->
                    </ul>

                    <h2>Tips and Tricks</h2>
                    <p id="game-tips">Game tips will be displayed here.</p>
                </article>
            </div>

            <div class="lg:col-span-1">
                <div class="bg-card-bg p-6 rounded-lg mb-8">
                    <h2 class="text-xl font-bold mb-4">Game Details</h2>
                    <div class="space-y-2">
                        <p><strong>Category:</strong> <span id="game-detail-category">Category</span></p>
                        <p><strong>Added:</strong> <span id="game-added-date">Date</span></p>
                        <p><strong>Plays:</strong> <span id="game-plays">0</span></p>
                        <div class="flex items-center">
                            <strong class="mr-2">Rating:</strong>
                            <div class="flex text-yellow-500">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                </svg>
                            </div>
                            <span class="ml-2 text-gray-text" id="game-rating">4.5</span>
                        </div>
                        <div class="mt-4">
                            <strong>Share This Game:</strong>
                            <div class="flex space-x-4 mt-2">
                                <a href="#" class="text-primary hover:text-primary-light" id="share-twitter" aria-label="Share on Twitter">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
                                    </svg>
                                </a>
                                <a href="#" class="text-primary hover:text-primary-light" id="share-facebook" aria-label="Share on Facebook">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                                    </svg>
                                </a>
                                <a href="#" class="text-primary hover:text-primary-light" id="share-pinterest" aria-label="Share on Pinterest">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 0c-6.627 0-12 5.372-12 12 0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146 1.124.347 2.317.535 3.554.535 6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z" fill-rule="evenodd" clip-rule="evenodd" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 相关游戏 -->
                <div class="bg-card-bg p-6 rounded-lg mb-8">
                    <h2 class="text-xl font-bold mb-4">Related Games</h2>
                    <div class="space-y-4" id="related-games-container">
                        <!-- 动态填充相关游戏 -->
                    </div>
                </div>
            </div>
        </main>

        <!-- 更多相似游戏 -->
        <section class="mt-12 mb-16">
            <h2 class="text-2xl font-bold mb-6">You Might Also Like</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="more-games-container">
                <!-- 动态填充更多游戏 -->
            </div>
        </section>
    </div>

    <!-- 页脚 -->
    <footer class="text-center mt-20 py-12 border-t border-gray-700">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8 text-left">
                <div>
                    <h3 class="text-xl font-bold text-primary mb-4">YourLair</h3>
                    <p class="text-gray-text mb-4">The best collection of free online games, updated regularly with new titles.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-text hover:text-primary transition" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
                            </svg>
                        </a>
                        <a href="#" class="text-gray-text hover:text-primary transition" aria-label="Instagram">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                            </svg>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold text-light-text mb-4">Categories</h3>
                    <ul class="space-y-2 text-gray-text">
                        <li><a href="../categories/action.html" class="hover:text-primary transition">Action Games</a></li>
                        <li><a href="../categories/adventure.html" class="hover:text-primary transition">Adventure Games</a></li>
                        <li><a href="../categories/puzzle.html" class="hover:text-primary transition">Puzzle Games</a></li>
                        <li><a href="../categories/strategy.html" class="hover:text-primary transition">Strategy Games</a></li>
                        <li><a href="../categories/sports.html" class="hover:text-primary transition">Sports Games</a></li>
                        <li><a href="../categories.html" class="hover:text-primary transition">All Categories</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold text-light-text mb-4">Quick Links</h3>
                    <ul class="space-y-2 text-gray-text">
                        <li><a href="../popular.html" class="hover:text-primary transition">Popular Games</a></li>
                        <li><a href="../new.html" class="hover:text-primary transition">New Games</a></li>
                        <li><a href="../about.html" class="hover:text-primary transition">About Us</a></li>
                        <li><a href="../contact.html" class="hover:text-primary transition">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-bold text-light-text mb-4">Legal</h3>
                    <ul class="space-y-2 text-gray-text">
                        <li><a href="../privacy.html" class="hover:text-primary transition">Privacy Policy</a></li>
                        <li><a href="../terms.html" class="hover:text-primary transition">Terms of Service</a></li>
                        <li><a href="../cookies.html" class="hover:text-primary transition">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="pt-8 border-t border-gray-700 text-gray-text text-sm flex flex-col md:flex-row justify-between">
                <p>© 2024 YourLair. All rights reserved.</p>
                <p class="mt-4 md:mt-0">Play free online games instantly in your browser.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript 脚本 -->
    <script>
        // 移动菜单切换
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        });
        
        // 记录游戏到本地存储的最近玩过列表
        function saveRecentGame(slug, title, categories, thumbnailUrl) {
            // 获取当前存储的游戏
            let recentGames = JSON.parse(localStorage.getItem('recentGames') || '[]');
            
            // 检查游戏是否已经在列表中
            const existingIndex = recentGames.findIndex(game => game.slug === slug);
            if (existingIndex !== -1) {
                // 如果已存在，移除它（稍后会添加到最前面）
                recentGames.splice(existingIndex, 1);
            }
            
            // 添加游戏到列表开头
            recentGames.unshift({
                slug,
                title,
                categories,
                thumbnailUrl,
                lastPlayed: new Date().toISOString()
            });
            
            // 只保留最近的10个游戏
            if (recentGames.length > 10) {
                recentGames = recentGames.slice(0, 10);
            }
            
            // 保存到本地存储
            localStorage.setItem('recentGames', JSON.stringify(recentGames));
        }
        
        // 获取游戏数据并填充页面
        async function loadGameData() {
            try {
                // 获取当前游戏的slug（从URL提取）
                const pathSegments = window.location.pathname.split('/');
                const filename = pathSegments[pathSegments.length - 1];
                const slug = filename.replace('.html', '');
                
                // 加载游戏数据
                const response = await fetch('../yourlair-importer/data/crazygames-list.json');
                const games = await response.json();
                
                // 找到当前游戏
                const game = games.find(g => g.slug === slug);
                
                if (game) {
                    // 填充页面内容
                    fillGameDetails(game);
                    
                    // 找到相同类别的游戏作为相关游戏
                    const relatedGames = games
                        .filter(g => g.selected && g.slug !== slug && g.category === game.category)
                        .slice(0, 3);
                    fillRelatedGames(relatedGames);
                    
                    // 找到其他推荐游戏
                    const moreGames = games
                        .filter(g => g.selected && g.slug !== slug && !relatedGames.includes(g))
                        .sort(() => 0.5 - Math.random()) // 随机排序
                        .slice(0, 4);
                    fillMoreGames(moreGames);
                    
                    // 记录到最近玩过
                    saveRecentGame(game.slug, game.title, game.category || 'Games', game.thumbnailUrl);
                    
                    // 设置分享链接
                    setupShareLinks(game);
                } else {
                    console.error('Game not found:', slug);
                }
            } catch (error) {
                console.error('Error loading game data:', error);
            }
        }
        
        // 填充游戏详情
        function fillGameDetails(game) {
            // 设置页面标题和元数据
            document.title = `${game.title} - YourLair`;
            document.getElementById('game-meta-description').content = game.description || `Play ${game.title} online at YourLair.`;
            document.getElementById('game-canonical').href = `https://yourlair.online/games/${game.slug}.html`;
            
            // 填充面包屑导航
            document.getElementById('game-breadcrumb-title').textContent = game.title;
            const categoryLink = document.getElementById('game-category-breadcrumb');
            const category = game.category ? game.category.split(',')[0].trim() : 'Games';
            categoryLink.textContent = category;
            categoryLink.href = `../categories/${category.toLowerCase()}.html`;
            
            // 设置标题和简短描述
            document.getElementById('header-game-title').textContent = game.title;
            document.getElementById('game-short-description').textContent = game.description || `Play ${game.title} online for free.`;
            
            // 设置游戏标签
            const tagsContainer = document.getElementById('game-tags');
            tagsContainer.innerHTML = '';
            const categories = game.category ? game.category.split(',') : ['Games'];
            categories.forEach(cat => {
                const tag = document.createElement('span');
                tag.className = 'bg-card-bg px-3 py-1 rounded-full text-sm';
                tag.textContent = cat.trim();
                tagsContainer.appendChild(tag);
            });
            
            // 设置游戏iframe
            document.getElementById('game-iframe').src = game.iframeSrc;
            
            // 设置游戏详细信息
            document.getElementById('how-to-play').textContent = `Use your keyboard and mouse to play ${game.title}. Follow on-screen instructions for controls.`;
            document.getElementById('game-overview').textContent = game.description || `${game.title} is an exciting online game that you can play for free in your browser.`;
            
            // 填充游戏特性
            const featuresContainer = document.getElementById('game-features');
            featuresContainer.innerHTML = '';
            const features = [
                'Engaging gameplay',
                'Beautiful graphics',
                'Easy to learn controls',
                'Challenging levels',
                'Free to play in your browser'
            ];
            features.forEach(feature => {
                const li = document.createElement('li');
                li.textContent = feature;
                featuresContainer.appendChild(li);
            });
            
            // 填充游戏技巧
            document.getElementById('game-tips').textContent = `Take your time to learn the controls and mechanics. Start with easier levels to build skills before tackling more challenging content in ${game.title}.`;
            
            // 填充游戏详情侧边栏
            document.getElementById('game-detail-category').textContent = game.category || 'Games';
            document.getElementById('game-added-date').textContent = new Date().toLocaleDateString();
            document.getElementById('game-plays').textContent = Math.floor(Math.random() * 50000) + 5000;
            document.getElementById('game-rating').textContent = '4.8';
        }
        
        // 填充相关游戏
        function fillRelatedGames(relatedGames) {
            const container = document.getElementById('related-games-container');
            container.innerHTML = '';
            
            if (relatedGames.length === 0) {
                const noGames = document.createElement('p');
                noGames.className = 'text-gray-text';
                noGames.textContent = 'No related games found.';
                container.appendChild(noGames);
                return;
            }
            
            relatedGames.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'related-game flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-700 transition';
                gameCard.innerHTML = `
                    <div class="w-16 h-16 flex-shrink-0 bg-gray-700 rounded overflow-hidden">
                        <img src="${game.thumbnailUrl}" alt="${game.title}" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-grow">
                        <h3 class="font-medium text-light-text">${game.title}</h3>
                        <p class="text-xs text-gray-text">${game.category || 'Games'}</p>
                    </div>
                `;
                
                // 添加点击事件以记录游戏到最近玩过
                gameCard.addEventListener('click', function() {
                    window.location.href = `${game.slug}.html`;
                    saveRecentGame(game.slug, game.title, game.category || 'Games', game.thumbnailUrl);
                });
                
                container.appendChild(gameCard);
            });
        }
        
        // 填充更多游戏
        function fillMoreGames(moreGames) {
            const container = document.getElementById('more-games-container');
            container.innerHTML = '';
            
            moreGames.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card bg-card-bg rounded-xl shadow overflow-hidden transition duration-300';
                gameCard.innerHTML = `
                    <a href="${game.slug}.html" onclick="saveRecentGame('${game.slug}', '${game.title.replace(/'/g, "\\'")}', '${game.category || 'Games'}', '${game.thumbnailUrl}')">
                        <div class="aspect-w-16 aspect-h-9 bg-gray-700">
                            <img src="${game.thumbnailUrl}" alt="${game.title}" class="object-cover w-full h-48">
                        </div>
                        <div class="p-4">
                            <h3 class="text-lg font-bold text-light-text">${game.title}</h3>
                            <p class="text-sm text-gray-text">${game.category || 'Games'}</p>
                        </div>
                    </a>
                `;
                container.appendChild(gameCard);
            });
        }
        
        // 设置分享链接
        function setupShareLinks(game) {
            const currentUrl = window.location.href;
            const gameTitle = encodeURIComponent(game.title);
            
            // Twitter分享
            document.getElementById('share-twitter').href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(currentUrl)}&text=Play ${gameTitle} on YourLair!`;
            
            // Facebook分享
            document.getElementById('share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`;
            
            // Pinterest分享
            document.getElementById('share-pinterest').href = `https://pinterest.com/pin/create/button/?url=${encodeURIComponent(currentUrl)}&media=${encodeURIComponent(game.thumbnailUrl)}&description=Play ${gameTitle} on YourLair!`;
        }
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadGameData();
        });
    </script>
</body>
</html>3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-